<form class="row g-2 mb-3" method="post" action="{{ url_for('budget_add') }}" data-panel-refresh>
  <div class="col-12 col-md-3"><input class="form-control" name="category" placeholder="Category (e.g., Venue)" required></div>
  <div class="col-12 col-md-3"><input class="form-control" name="item" placeholder="Item (e.g., Deposit)" required></div>
  <div class="col-6 col-md-2"><input class="form-control" name="estimate" type="number" step="0.01" placeholder="Estimate $"></div>
  <div class="col-6 col-md-2"><input class="form-control" name="actual" type="number" step="0.01" placeholder="Actual $"></div>
  <div class="col-6 col-md-2"><input class="form-control" name="due_date" type="date"></div>
  <div class="col-6 col-md-2"><input class="form-control" name="vendor_url" placeholder="Vendor URL"></div>
  <div class="col-6 col-md-2 d-flex align-items-center"><div class="form-check"><input class="form-check-input" type="checkbox" name="paid" id="paid"><label class="form-check-label" for="paid">Paid</label></div></div>
  <div class="col-12"><input class="form-control" name="notes" placeholder="Notes (optional)"></div>
  <div class="col-12 d-grid"><button class="btn btn-primary">Add</button></div>
</form>

<div class="d-flex flex-wrap align-items-center gap-3 mb-2">
  <div><strong>Total Estimate:</strong> ${{ '%.2f' % (total_est/100) }}</div>
  <div><strong>Total Actual:</strong> ${{ '%.2f' % (total_act/100) }}</div>
  <div class="text-muted small">(* stored in cents internally)</div>
</div>

<div class="table-responsive">
  <table class="table align-middle">
    <thead><tr><th>Category</th><th>Item</th><th>Estimate</th><th>Actual</th><th>Paid</th><th>Due</th><th>Vendor</th><th>Notes</th></tr></thead>
    <tbody>
      {% for i in items %}
      <tr>
        <td>{{ i.category }}</td>
        <td>{{ i.item }}</td>
        <td>${{ '%.2f' % ((i.estimate or 0)/100) }}</td>
        <td>{% if i.actual is not none %}${{ '%.2f' % ((i.actual or 0)/100) }}{% else %}—{% endif %}</td>
        <td>{% if i.paid %}<span class="badge text-bg-success">Paid</span>{% else %}<span class="badge text-bg-light border">Unpaid</span>{% endif %}</td>
        <td>{{ i.due_date or '—' }}</td>
        <td>{% if i.vendor_url %}<a href="{{ i.vendor_url }}" target="_blank">link</a>{% else %}—{% endif %}</td>
        <td class="text-muted small">{{ i.notes or '' }}</td>
      </tr>
      {% else %}
      <tr><td colspan="8" class="text-muted">No budget items yet.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="mt-3">
  <a class="btn btn-outline-secondary btn-sm disabled" role="button" aria-disabled="true">Export Budget (coming soon)</a>
</div>
